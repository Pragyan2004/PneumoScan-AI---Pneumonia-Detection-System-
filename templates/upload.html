{% extends "base.html" %}

{% block content %}
<section class="upload-section">
    <div class="container">
        <div class="upload-header">
            <h1 class="section-title">Scan Chest X-Ray</h1>
            <p class="section-subtitle">Upload a chest X-ray image for AI-powered pneumonia detection</p>
        </div>

        <div class="upload-container">
            <div class="upload-area" id="uploadArea">
                <div class="upload-icon">
                    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="17 8 12 3 7 8"></polyline>
                        <line x1="12" y1="3" x2="12" y2="15"></line>
                    </svg>
                </div>
                <h3>Click to Upload X-Ray Image</h3>
                <p>Supported formats: JPG, PNG</p>
                <p class="upload-max-size">Max file size: 16MB</p>
                <div class="upload-hint">
                    <small>üí° Click anywhere in this area or drag & drop your X-ray image</small>
                </div>
            </div>
            <div class="preview-container" id="previewContainer" style="display: none;">
                <div class="preview-header">
                    <h3>Image Preview</h3>
                    <button class="btn btn-secondary" onclick="resetUpload()">Upload Another</button>
                </div>
                <div class="preview-content">
                    <div class="image-wrapper">
                        <img id="previewImage" src="" alt="X-Ray Preview">
                        <div class="image-overlay">
                            <div class="image-actions">
                                <button class="btn btn-outline" onclick="zoomImage(1.2)">Zoom In</button>
                                <button class="btn btn-outline" onclick="zoomImage(0.8)">Zoom Out</button>
                                <button class="btn btn-outline" onclick="resetZoom()">Reset</button>
                            </div>
                        </div>
                    </div>
                    <div class="analysis-controls">
                        <button class="btn btn-primary analyze-btn" id="analyzeBtn" onclick="analyzeImage()" disabled>
                            <span class="btn-text">Analyze Image</span>
                            <div class="loading-spinner" style="display: none;"></div>
                        </button>
                        <div class="analysis-note">
                            <p>‚úÖ Image loaded successfully! Click "Analyze Image" to begin detection.</p>
                            <p>‚è±Ô∏è Analysis typically takes 2-3 seconds</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="results-container" id="resultsContainer" style="display: none;">
               
            </div>
        </div>
    </div>
</section>

<div class="modal" id="errorModal">
    <div class="modal-content">
        <span class="close-modal" onclick="closeModal()">&times;</span>
        <div class="modal-icon error">‚ùå</div>
        <h3>Upload Error</h3>
        <p id="errorMessage"></p>
        <button class="btn btn-primary" onclick="closeModal()">Try Again</button>
    </div>
</div>

<div class="modal" id="loadingModal">
    <div class="modal-content">
        <div class="modal-icon loading">
            <div class="loading-spinner large"></div>
        </div>
        <h3>Analyzing Image</h3>
        <p>Our AI is processing your X-ray image. This usually takes 2-3 seconds.</p>
        <div class="progress-bar">
            <div class="progress-fill"></div>
        </div>
    </div>
</div>
{% endblock %}